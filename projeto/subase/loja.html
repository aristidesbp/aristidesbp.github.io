<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Mercado Virtual</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav><span>Ol√°, Cliente</span> <button onclick="logout()">Sair</button></nav>
    <div id="vitrine" class="grid"></div>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="auth.js"></script>
    <script>
        async function carregarLoja() {
            const { data } = await _supabase.from('produtos').select('*').eq('ativo', true);
            document.getElementById('vitrine').innerHTML = data.map(p => `
                <div class="card">
                    <img src="${p.imagem_base64}" width="100">
                    <h4>${p.nome}</h4>
                    <p>R$ ${p.preco}</p>
                    <button onclick="comprar('${p.id_produto}')">Adicionar</button>
                </div>
            `).join('');
        }
        carregarLoja();
    </script>
</body>
</html>
