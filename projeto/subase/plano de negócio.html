<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Sistema Abp</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body { font-family: sans-serif; background: #f4f7f9; padding: 20px; }
        .container { max-width: 700px; margin: auto; background: white; padding: 25px; border-radius: 10px; shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h2 { color: #1e3a8a; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        label { display: block; margin-top: 15px; font-weight: bold; color: #444; }
        input, textarea { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        button { padding: 12px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; color: white; transition: 0.3s; }
        .btn-pdf { background: #1e3a8a; grid-column: span 2; }
        .btn-clear { background: #dc2626; }
        .btn-reset { background: #64748b; }
        button:hover { opacity: 0.8; }
    </style>
</head>
<body>

<div class="container">
    <h2>Proposta Sistema Abp</h2>
    
    <form id="businessForm">
        <label>Nome do Projeto:</label>
        <input type="text" id="projeto">

        <label>Descrição do Problema:</label>
        <textarea id="problema" rows="3"></textarea>

        <label>Acessibilidade:</label>
        <input type="text" id="tecnologia">

        <label>Funcionalidades:</label>
        <textarea id="funcionalidades" rows="4"></textarea>

        <label>Benefício Patrocinador:</label>
        <textarea id="beneficio" rows="2"></textarea>

        <div class="btn-group">
            <button type="button" class="btn-reset" onclick="carregarDadosPadrao()">Restaurar Dados Abp</button>
            <button type="button" class="btn-clear" onclick="limparTudo()">Limpar Campos</button>
            <button type="button" class="btn-pdf" onclick="gerarPDF()">Gerar PDF para Download</button>
        </div>
    </form>
</div>

<script>
    const campos = ['projeto', 'problema', 'tecnologia', 'funcionalidades', 'beneficio'];

    // Salva automaticamente enquanto você digita
    window.onload = () => {
        campos.forEach(id => {
            const campo = document.getElementById(id);
            campo.value = localStorage.getItem(id) || '';
            campo.addEventListener('input', () => localStorage.setItem(id, campo.value));
        });
        if(!document.getElementById('projeto').value) carregarDadosPadrao();
    };

    function carregarDadosPadrao() {
        const padrao = {
            projeto: "Sistema Abp",
            problema: "Sistema ERP para gerenciar lojas, supermercados e atacadistas. Custo zero de infraestrutura (Supabase/GitHub).",
            tecnologia: "Funciona em qualquer computador, celular, tablet e Smart TV.",
            funcionalidades: "Cadastro de fornecedores; Cadastro de produtos; Controle de estoque; NF-e; Armazenamento Base64.",
            beneficio: "Configuração completa e isenção de mensalidades."
        };
        Object.keys(padrao).forEach(id => {
            document.getElementById(id).value = padrao[id];
            localStorage.setItem(id, padrao[id]);
        });
    }

    function limparTudo() {
        if(confirm("Deseja apagar todos os textos?")) {
            campos.forEach(id => {
                document.getElementById(id).value = '';
                localStorage.removeItem(id);
            });
        }
    }

    function gerarPDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        let y = 20;

        doc.setFontSize(18);
        doc.text("Plano de Negócio - " + document.getElementById('projeto').value, 20, y);
        y += 15;

        doc.setFontSize(12);
        campos.forEach(id => {
            doc.setFont("helvetica", "bold");
            doc.text(id.toUpperCase() + ":", 20, y);
            y += 7;
            doc.setFont("helvetica", "normal");
            const txt = doc.splitTextToSize(document.getElementById(id).value, 170);
            doc.text(txt, 20, y);
            y += (txt.length * 7) + 5;
        });

        doc.save("Plano_Abp.pdf");
    }
</script>

</body>
</html>

