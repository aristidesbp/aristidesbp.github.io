<!DOCTYPE html>
<html lang="pt-br" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cardápio LancheBar - Pedido com Quantidade e Remoção</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --vermelho-telha: #b2332b;
      --bege-claro: #f3e5c1;
      --marrom-madeira: #5e3a26;
      --preto-quadro: #2e2e2e;
      --amarelo-mostarda: #f1c40f;
    }
  </style>
</head>
<body class="bg-[var(--bege-claro)] text-[var(--preto-quadro)] font-sans">

  <!-- Cabeçalho -->
  <header class="bg-[var(--vermelho-telha)] text-white py-6 shadow-lg">
    <img src="img/barraquinha-lanche.jpg" alt="Barraquinha de Lanche" class="w-full h-64 object-cover rounded-b-xl shadow-lg" />
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-4xl font-bold">LancheBar da Esquina</h1>
      <p class="text-lg mt-2">Seu lanche artesanal favorito!</p>
    </div>
  </header>

  <!-- Cardápio -->
  <section class="container mx-auto px-4 py-8">
    <h2 class="text-2xl font-bold mb-6 text-[var(--marrom-madeira)]">Nosso Cardápio</h2>

    <div id="menu-items" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">

      <!-- Produto carne seca -->
      <div class="bg-white p-4 rounded-xl shadow-md flex flex-col justify-between">
        <img src="img/carne-seca.jpg" alt="Carne seca" class="w-full h-64 object-cover rounded-b-xl shadow-lg" />
        <h3 class="text-xl font-semibold">Carne seca</h3>
        <p class="text-sm text-gray-600">Tapioca, carne seca, queijo</p>
        <span class="text-lg font-bold text-[var(--vermelho-telha)]">R$ 18,00</span>
        <button
          onclick="addToOrder('Carne seca', 18)"
          class="mt-3 bg-[var(--amarelo-mostarda)] text-black py-2 px-4 rounded hover:bg-yellow-400"
        >
          Adicionar
        </button>
      </div>

      <!-- Produto banana -->
      <div class="bg-white p-4 rounded-xl shadow-md flex flex-col justify-between">
        <img src="img/banana.jpg" alt="Banana" class="w-full h-64 object-cover rounded-b-xl shadow-lg" />
        <h3 class="text-xl font-semibold">Banana</h3>
        <p class="text-sm text-gray-600">Tapioca, banana, doce de leite</p>
        <span class="text-lg font-bold text-[var(--vermelho-telha)]">R$ 10,00</span>
        <button
          onclick="addToOrder('Banana', 10)"
          class="mt-3 bg-[var(--amarelo-mostarda)] text-black py-2 px-4 rounded hover:bg-yellow-400"
        >
          Adicionar
        </button>
      </div>

      <!-- Produto frango -->
      <div class="bg-white p-4 rounded-xl shadow-md flex flex-col justify-between">
        <img src="img/frango.jpg" alt="Frango" class="w-full h-64 object-cover rounded-b-xl shadow-lg" />
        <h3 class="text-xl font-semibold">Frango</h3>
        <p class="text-sm text-gray-600">Tapioca, cremetize, jambu</p>
        <span class="text-lg font-bold text-[var(--vermelho-telha)]">R$ 20,00</span>
        <button
          onclick="addToOrder('Frango', 20)"
          class="mt-3 bg-[var(--amarelo-mostarda)] text-black py-2 px-4 rounded hover:bg-yellow-400"
        >
          Adicionar
        </button>
      </div>

      <!-- Produto morango -->
      <div class="bg-white p-4 rounded-xl shadow-md flex flex-col justify-between">
        <img src="img/morango.jpg" alt="Tapioca de morango" class="w-full h-64 object-cover rounded-b-xl shadow-lg" />
        <h3 class="text-xl font-semibold">Tapioca de morango</h3>
        <p class="text-sm text-gray-600">Tapioca, morango, nutella</p>
        <span class="text-lg font-bold text-[var(--vermelho-telha)]">R$ 20,00</span>
        <button
          onclick="addToOrder('Tapioca de morango', 20)"
          class="mt-3 bg-[var(--amarelo-mostarda)] text-black py-2 px-4 rounded hover:bg-yellow-400"
        >
          Adicionar
        </button>
      </div>

      <!-- Produto ovo -->
      <div class="bg-white p-4 rounded-xl shadow-md flex flex-col justify-between">
        <img src="img/ovo.jpg" alt="Tapioca de ovo" class="w-full h-64 object-cover rounded-b-xl shadow-lg" />
        <h3 class="text-xl font-semibold">Tapioca de ovo</h3>
        <p class="text-sm text-gray-600">Tapioca, ovo temperado</p>
        <span class="text-lg font-bold text-[var(--vermelho-telha)]">R$ 10,00</span>
        <button
          onclick="addToOrder('Tapioca de ovo', 10)"
          class="mt-3 bg-[var(--amarelo-mostarda)] text-black py-2 px-4 rounded hover:bg-yellow-400"
        >
          Adicionar
        </button>
      </div>

      <!-- Produto salada -->
      <div class="bg-white p-4 rounded-xl shadow-md flex flex-col justify-between">
        <img src="img/salada.jpg" alt="Tapioca de vegana" class="w-full h-64 object-cover rounded-b-xl shadow-lg" />
        <h3 class="text-xl font-semibold">Tapioca de vegana</h3>
        <p class="text-sm text-gray-600">Tapioca, salada</p>
        <span class="text-lg font-bold text-[var(--vermelho-telha)]">R$ 15,00</span>
        <button
          onclick="addToOrder('Tapioca de vegana', 15)"
          class="mt-3 bg-[var(--amarelo-mostarda)] text-black py-2 px-4 rounded hover:bg-yellow-400"
        >
          Adicionar
        </button>
      </div>

      <!-- Produto presunto -->
      <div class="bg-white p-4 rounded-xl shadow-md flex flex-col justify-between">
        <img src="img/presunto.jpg" alt="Tapioca de presunto" class="w-full h-64 object-cover rounded-b-xl shadow-lg" />
        <h3 class="text-xl font-semibold">Tapioca de presunto</h3>
        <p class="text-sm text-gray-600">Tapioca, presunto defumado, queijo</p>
        <span class="text-lg font-bold text-[var(--vermelho-telha)]">R$ 15,00</span>
        <button
          onclick="addToOrder('Tapioca de presunto', 15)"
          class="mt-3 bg-[var(--amarelo-mostarda)] text-black py-2 px-4 rounded hover:bg-yellow-400"
        >
          Adicionar
        </button>
      </div>
    </div>
  </section>

  <!-- Formulário de Pedido -->
  <section class="bg-[var(--preto-quadro)] text-white py-8 px-4">
    <div class="container mx-auto">
      <h2 class="text-2xl font-bold mb-4">Finalizar Pedido</h2>
      
      <!-- Área onde será renderizada a lista de itens com controles -->
      <div
        id="itens-pedido"
        class="mb-4 max-h-48 overflow-y-auto bg-gray-800 p-4 rounded text-white space-y-2"
      >
        <!-- Itens do pedido aparecem aqui -->
      </div>

      <!-- Formulário com dados do cliente -->
      <form id="pedido-form" class="space-y-4" onsubmit="event.preventDefault(); enviarWhatsApp();">
        <input
          type="text"
          placeholder="Nome Completo"
          id="nome"
          class="w-full p-3 rounded bg-white text-black"
          required
        />
        <input
          type="text"
          placeholder="CPF"
          id="cpf"
          class="w-full p-3 rounded bg-white text-black"
          required
        />
        <input
          type="tel"
          placeholder="Telefone"
          id="telefone"
          class="w-full p-3 rounded bg-white text-black"
          required
        />
        <input
          type="text"
          id="endereco"
          placeholder="Endereço Completo"
          class="w-full p-3 rounded bg-white text-black"
          required
         />

         <select id="formaPagamento" class="w-full p-3 rounded bg-white text-black" required>
  <option value="" disabled selected>Forma de Pagamento</option>
  <option value="Dinheiro">Dinheiro</option>
  <option value="Cartão de Crédito">Cartão de Crédito</option>
  <option value="Cartão de Débito">Cartão de Débito</option>
  <option value="Pix">Pix</option>
  <option value="Transferência">Transferência</option>
</select>
 

        <textarea
          id="obs"
          placeholder="Observações"
          class="w-full p-3 rounded bg-white text-black"
          rows="3"
        ></textarea>

        <!-- Total do pedido -->
        <p class="text-lg font-bold">
          Total do pedido: R$ <span id="total">0,00</span>
        </p>

        <button
          type="submit"
          class="bg-[var(--amarelo-mostarda)] text-black py-3 px-6 rounded hover:bg-yellow-400 font-semibold"
        >
          Enviar pedido via WhatsApp
        </button>
      </form>
    </div>
  </section>

  <!-- SCRIPT: lógica do pedido -->
  <script>
    /*
    DOCUMENTAÇÃO: Lógica para gerenciamento do pedido com itens, quantidades, remoção e cálculo do total.

    Variáveis:
      - itens: array que armazena objetos {nome, preco, quantidade}
      - total: valor acumulado do pedido

    Funções:
      - addToOrder(nome, preco): adiciona um item ao pedido ou incrementa quantidade se já existe.
      - renderOrder(): atualiza a visualização da lista de itens e do total.
      - changeQuantity(nome, delta): altera a quantidade de um item (+1 ou -1), remove se quantidade chegar a zero.
      - removeItem(nome): remove completamente o item do pedido.
      - enviarWhatsApp(): gera a mensagem com dados e pedido para enviar via WhatsApp.
    */

    let itens = [];

    /**
     * Adiciona um item ao pedido.
     * Se já existir, incrementa a quantidade.
     */
    function addToOrder(nome, preco) {
      const index = itens.findIndex(item => item.nome === nome);
      if (index !== -1) {
        // Item já existe, incrementa quantidade
        itens[index].quantidade++;
      } else {
        // Novo item
        itens.push({ nome, preco, quantidade: 1 });
      }
      renderOrder();
    }

    /**
     * Renderiza a lista de itens e o total na tela.
     */
    function renderOrder() {
      const container = document.getElementById('itens-pedido');
      container.innerHTML = ''; // limpa lista

      let total = 0;

      if (itens.length === 0) {
        container.innerHTML = '<p class="text-gray-400">Nenhum item no pedido.</p>';
      }

      itens.forEach(item => {
        total += item.preco * item.quantidade;

        // Cria div para o item com controles de quantidade e remoção
        const itemDiv = document.createElement('div');
        itemDiv.className = 'flex justify-between items-center bg-[var(--vermelho-telha)] rounded p-2 shadow-md';

        // Texto do item com quantidade e subtotal
        const texto = document.createElement('span');
        texto.textContent = `${item.quantidade} x ${item.nome} = R$ ${(item.preco * item.quantidade).toFixed(2)}`;
        texto.className = 'font-semibold';

        // Botões para controlar quantidade e remover
        const controles = document.createElement('div');
        controles.className = 'space-x-2';

        // Botão diminuir quantidade
        const btnMinus = document.createElement('button');
        btnMinus.textContent = '-';
        btnMinus.className = 'bg-yellow-400 text-black font-bold px-3 rounded hover:bg-yellow-300';
        btnMinus.onclick = () => changeQuantity(item.nome, -1);

        // Botão aumentar quantidade
        const btnPlus = document.createElement('button');
        btnPlus.textContent = '+';
        btnPlus.className = 'bg-yellow-400 text-black font-bold px-3 rounded hover:bg-yellow-300';
        btnPlus.onclick = () => changeQuantity(item.nome, +1);

        // Botão remover item
        const btnRemove = document.createElement('button');
        btnRemove.textContent = 'Remover';
        btnRemove.className = 'bg-red-600 text-white px-3 rounded hover:bg-red-500';
        btnRemove.onclick = () => removeItem(item.nome);

        controles.appendChild(btnMinus);
        controles.appendChild(btnPlus);
        controles.appendChild(btnRemove);

        itemDiv.appendChild(texto);
        itemDiv.appendChild(controles);

        container.appendChild(itemDiv);
      });

      // Atualiza o total no HTML
      document.getElementById('total').textContent = total.toFixed(2);
    }

    /**
     * Altera a quantidade de um item no pedido.
     * Remove se quantidade ficar zero ou menos.
     */
    function changeQuantity(nome, delta) {
      const index = itens.findIndex(item => item.nome === nome);
      if (index !== -1) {
        itens[index].quantidade += delta;
        if (itens[index].quantidade <= 0) {
          // Remove item
          itens.splice(index, 1);
        }
        renderOrder();
      }
    }

    /**
     * Remove completamente um item do pedido.
     */
    function removeItem(nome) {
      itens = itens.filter(item => item.nome !== nome);
      renderOrder();
    }

    /**
     * Gera a mensagem do pedido e envia via WhatsApp.
     */
    function enviarWhatsApp() {
      if (itens.length === 0) {
        alert('Adicione ao menos um item ao pedido!');
        return;
      }

      // Dados do cliente
      const nomeCliente = document.getElementById('nome').value.trim();
      const cpfCliente = document.getElementById('cpf').value.trim();
      const telefoneCliente = document.getElementById('telefone').value.trim();
      const enderecoCliente = document.getElementById('endereco').value.trim();
      const formaPagamento = document.getElementById('formaPagamento').value;
      const observacoes = document.getElementById('obs').value.trim();

       //Inclua na validação:
      if (!nomeCliente || !cpfCliente || !telefoneCliente || !enderecoCliente || !formaPagamento) {
        alert('Por favor, preencha Nome, CPF e Telefone!');
        return;
      }

      // Monta mensagem com o pedido
      let mensagem = `*Pedido do LancheBar*\n\n`;
      mensagem += `*Cliente:* ${nomeCliente}\n`;
      mensagem += `*CPF:* ${cpfCliente}\n`;
      mensagem += `*Telefone:* ${telefoneCliente}\n\n`;
      mensagem += `*Endereço:* ${enderecoCliente}\n\n`;
      mensagem += `*Forma de Pagamento:* ${formaPagamento}\n\n`;
      mensagem += `*Itens do pedido:*\n`;

      let total = 0;
      itens.forEach(item => {
        mensagem += `- ${item.quantidade} x ${item.nome} = R$ ${(item.preco * item.quantidade).toFixed(2)}\n`;
        total += item.preco * item.quantidade;
      });

      mensagem += `\n*Total:* R$ ${total.toFixed(2)}\n\n`;

      if (observacoes) {
        mensagem += `*Observações:* ${observacoes}\n\n`;
      }

      mensagem += 'Obrigado pelo seu pedido!';

      // Codifica mensagem para URL
      const mensagemCodificada = encodeURIComponent(mensagem);

      // Número do WhatsApp para onde enviar (ajuste conforme seu número)
      const numeroWhatsApp = '5591992420981'; // Exemplo: Brasil +55, código de área 91, número fictício

      // Abre WhatsApp Web para envio da mensagem
      const url = `https://wa.me/${numeroWhatsApp}?text=${mensagemCodificada}`;
      window.open(url, '_blank');
    }

    // Inicializa o pedido vazio
    renderOrder();
  </script>

</body>
</html>

